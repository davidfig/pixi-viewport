<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>pixi-viewport API Documentation</title>
    
    <meta name="description" content="Documentation for pixi-viewport library" />
    
        <meta name="keywords" content="docs, documentation, html5, javascript, jsdoc, camera, viewport, bounce, snap, 2d" />
        <meta name="keyword" content="docs, documentation, html5, javascript, jsdoc, camera, viewport, bounce, snap, 2d" />
    
    
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <script src="scripts/jquery.min.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link href="https://fonts.googleapis.com/css?family=Libre+Franklin:400,700" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="styles/main.css">

    
    <script>
    var config = {"monospaceLinks":false,"cleverLinks":false,"default":{"outputSourceFiles":true},"applicationName":"pixi-viewport","footer":"by YOPEY YOPEY LLC (yopeyopey.com)","copyright":"Copyright Â© 2019 YOPEY YOPEY LLC.","meta":{"title":"pixi-viewport API Documentation","description":"Documentation for pixi-viewport library","keyword":"docs, documentation, html5, javascript, jsdoc, camera, viewport, bounce, snap, 2d"}};
    </script>
    

    
</head>
<body>
<div id="wrap" class="clearfix">
    
<div class="navigation">
    <h3 class="applicationName"><a href="index.html">pixi-viewport</a></h3>
    <button id="menuToggle" class="btn btn-link btn-lg menu-toggle">
        <span class="glyphicon glyphicon-menu-hamburger"></span>
    </button>
    <div class="search">
        <input id="search" type="text" class="form-control input-md" placeholder="Search...">
    </div>
    <ul class="list">
    
        
        <li class="item" data-name="global">
            <span class="title namespace ">
                
                <span class="namespaceTag">
                    <span class="glyphicon glyphicon-globe"></span>
                </span>
                
                <a href="global.html">Global</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            <span class="subtitle">Typedefs</span>
            
                <li class="parent" data-name="BounceOptions"><a href="global.html#BounceOptions">BounceOptions</a></li>
            
                <li class="parent" data-name="ClampOptions"><a href="global.html#ClampOptions">ClampOptions</a></li>
            
                <li class="parent" data-name="ClampZoomOptions"><a href="global.html#ClampZoomOptions">ClampZoomOptions</a></li>
            
                <li class="parent" data-name="DecelerateOptions"><a href="global.html#DecelerateOptions">DecelerateOptions</a></li>
            
                <li class="parent" data-name="DragOptions"><a href="global.html#DragOptions">DragOptions</a></li>
            
                <li class="parent" data-name="FollowOptions"><a href="global.html#FollowOptions">FollowOptions</a></li>
            
                <li class="parent" data-name="HitArea"><a href="global.html#HitArea">HitArea</a></li>
            
                <li class="parent" data-name="LastDrag"><a href="global.html#LastDrag">LastDrag</a></li>
            
                <li class="parent" data-name="MouseEdgesOptions"><a href="global.html#MouseEdgesOptions">MouseEdgesOptions</a></li>
            
                <li class="parent" data-name="PinchOptions"><a href="global.html#PinchOptions">PinchOptions</a></li>
            
                <li class="parent" data-name="SnapOptions"><a href="global.html#SnapOptions">SnapOptions</a></li>
            
                <li class="parent" data-name="SnapZoomOptions"><a href="global.html#SnapZoomOptions">SnapZoomOptions</a></li>
            
                <li class="parent" data-name="ViewportOptions"><a href="global.html#ViewportOptions">ViewportOptions</a></li>
            
                <li class="parent" data-name="ViewportTouch"><a href="global.html#ViewportTouch">ViewportTouch</a></li>
            
                <li class="parent" data-name="WheelOptions"><a href="global.html#WheelOptions">WheelOptions</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        
    
        
        <li class="item" data-name="Plugin">
            <span class="title  ">
                
                <a href="Plugin.html">Plugin</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Plugin#destroy"><a href="Plugin.html#destroy">destroy</a></li>
            
                <li class="parent  " data-name="Plugin#down"><a href="Plugin.html#down">down</a></li>
            
                <li class="parent  " data-name="Plugin#move"><a href="Plugin.html#move">move</a></li>
            
                <li class="parent  " data-name="Plugin#pause"><a href="Plugin.html#pause">pause</a></li>
            
                <li class="parent  " data-name="Plugin#reset"><a href="Plugin.html#reset">reset</a></li>
            
                <li class="parent  " data-name="Plugin#resize"><a href="Plugin.html#resize">resize</a></li>
            
                <li class="parent  " data-name="Plugin#resume"><a href="Plugin.html#resume">resume</a></li>
            
                <li class="parent  " data-name="Plugin#up"><a href="Plugin.html#up">up</a></li>
            
                <li class="parent  " data-name="Plugin#update"><a href="Plugin.html#update">update</a></li>
            
                <li class="parent  " data-name="Plugin#wheel"><a href="Plugin.html#wheel">wheel</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        
        <li class="item" data-name="PluginManager">
            <span class="title  ">
                
                <a href="PluginManager.html">PluginManager</a>
            </span>
            <ul class="members itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="PluginManager#add"><a href="PluginManager.html#add">add</a></li>
            
                <li class="parent  " data-name="PluginManager#get"><a href="PluginManager.html#get">get</a></li>
            
                <li class="parent  " data-name="PluginManager#pause"><a href="PluginManager.html#pause">pause</a></li>
            
                <li class="parent  " data-name="PluginManager#remove"><a href="PluginManager.html#remove">remove</a></li>
            
                <li class="parent  " data-name="PluginManager#reset"><a href="PluginManager.html#reset">reset</a></li>
            
                <li class="parent  " data-name="PluginManager#resume"><a href="PluginManager.html#resume">resume</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            </ul>
        </li>
    
        
        <li class="item" data-name="Viewport">
            <span class="title  ">
                
                <a href="Viewport.html">Viewport</a>
            </span>
            <ul class="members itemMembers">
            
            <span class="subtitle">Members</span>
            
                <li class="parent " data-name="Viewport#bottom"><a href="Viewport.html#bottom">bottom</a></li>
            
                <li class="parent " data-name="Viewport#center"><a href="Viewport.html#center">center</a></li>
            
                <li class="parent " data-name="Viewport#corner"><a href="Viewport.html#corner">corner</a></li>
            
                <li class="parent " data-name="Viewport#dirty"><a href="Viewport.html#dirty">dirty</a></li>
            
                <li class="parent " data-name="Viewport#forceHitArea"><a href="Viewport.html#forceHitArea">forceHitArea</a></li>
            
                <li class="parent " data-name="Viewport#left"><a href="Viewport.html#left">left</a></li>
            
                <li class="parent " data-name="Viewport#pause"><a href="Viewport.html#pause">pause</a></li>
            
                <li class="parent " data-name="Viewport#plugins"><a href="Viewport.html#plugins">plugins</a></li>
            
                <li class="parent " data-name="Viewport#right"><a href="Viewport.html#right">right</a></li>
            
                <li class="parent " data-name="Viewport#scaled"><a href="Viewport.html#scaled">scaled</a></li>
            
                <li class="parent " data-name="Viewport#screenHeight"><a href="Viewport.html#screenHeight">screenHeight</a></li>
            
                <li class="parent " data-name="Viewport#screenWidth"><a href="Viewport.html#screenWidth">screenWidth</a></li>
            
                <li class="parent " data-name="Viewport#screenWorldHeight"><a href="Viewport.html#screenWorldHeight">screenWorldHeight</a></li>
            
                <li class="parent " data-name="Viewport#screenWorldWidth"><a href="Viewport.html#screenWorldWidth">screenWorldWidth</a></li>
            
                <li class="parent " data-name="Viewport#threshold"><a href="Viewport.html#threshold">threshold</a></li>
            
                <li class="parent " data-name="Viewport#top"><a href="Viewport.html#top">top</a></li>
            
                <li class="parent " data-name="Viewport#worldHeight"><a href="Viewport.html#worldHeight">worldHeight</a></li>
            
                <li class="parent " data-name="Viewport#worldScreenHeight"><a href="Viewport.html#worldScreenHeight">worldScreenHeight</a></li>
            
                <li class="parent " data-name="Viewport#worldScreenWidth"><a href="Viewport.html#worldScreenWidth">worldScreenWidth</a></li>
            
                <li class="parent " data-name="Viewport#worldWidth"><a href="Viewport.html#worldWidth">worldWidth</a></li>
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="typedefs itemMembers">
            
            </ul>
            <ul class="methods itemMembers">
            
            <span class="subtitle">Methods</span>
            
                <li class="parent  " data-name="Viewport#bounce"><a href="Viewport.html#bounce">bounce</a></li>
            
                <li class="parent  " data-name="Viewport#clamp"><a href="Viewport.html#clamp">clamp</a></li>
            
                <li class="parent  " data-name="Viewport#clampZoom"><a href="Viewport.html#clampZoom">clampZoom</a></li>
            
                <li class="parent  " data-name="Viewport#decelerate"><a href="Viewport.html#decelerate">decelerate</a></li>
            
                <li class="parent  " data-name="Viewport#destroy"><a href="Viewport.html#destroy">destroy</a></li>
            
                <li class="parent  " data-name="Viewport#drag"><a href="Viewport.html#drag">drag</a></li>
            
                <li class="parent  " data-name="Viewport#ensureVisible"><a href="Viewport.html#ensureVisible">ensureVisible</a></li>
            
                <li class="parent  " data-name="Viewport#fit"><a href="Viewport.html#fit">fit</a></li>
            
                <li class="parent  " data-name="Viewport#fitHeight"><a href="Viewport.html#fitHeight">fitHeight</a></li>
            
                <li class="parent  " data-name="Viewport#fitWidth"><a href="Viewport.html#fitWidth">fitWidth</a></li>
            
                <li class="parent  " data-name="Viewport#fitWorld"><a href="Viewport.html#fitWorld">fitWorld</a></li>
            
                <li class="parent  " data-name="Viewport#follow"><a href="Viewport.html#follow">follow</a></li>
            
                <li class="parent  " data-name="Viewport#getVisibleBounds"><a href="Viewport.html#getVisibleBounds">getVisibleBounds</a></li>
            
                <li class="parent  " data-name="Viewport#mouseEdges"><a href="Viewport.html#mouseEdges">mouseEdges</a></li>
            
                <li class="parent  " data-name="Viewport#moveCenter"><a href="Viewport.html#moveCenter">moveCenter</a></li>
            
                <li class="parent  " data-name="Viewport#moveCorner"><a href="Viewport.html#moveCorner">moveCorner</a></li>
            
                <li class="parent  " data-name="Viewport#OOB"><a href="Viewport.html#OOB">OOB</a></li>
            
                <li class="parent  " data-name="Viewport#pinch"><a href="Viewport.html#pinch">pinch</a></li>
            
                <li class="parent  " data-name="Viewport#resize"><a href="Viewport.html#resize">resize</a></li>
            
                <li class="parent  " data-name="Viewport#setZoom"><a href="Viewport.html#setZoom">setZoom</a></li>
            
                <li class="parent  " data-name="Viewport#snap"><a href="Viewport.html#snap">snap</a></li>
            
                <li class="parent  " data-name="Viewport#snapZoom"><a href="Viewport.html#snapZoom">snapZoom</a></li>
            
                <li class="parent  " data-name="Viewport#toScreen"><a href="Viewport.html#toScreen">toScreen</a></li>
            
                <li class="parent  " data-name="Viewport#toWorld"><a href="Viewport.html#toWorld">toWorld</a></li>
            
                <li class="parent  " data-name="Viewport#update"><a href="Viewport.html#update">update</a></li>
            
                <li class="parent  " data-name="Viewport#wheel"><a href="Viewport.html#wheel">wheel</a></li>
            
                <li class="parent  " data-name="Viewport#zoom"><a href="Viewport.html#zoom">zoom</a></li>
            
                <li class="parent  " data-name="Viewport#zoomPercent"><a href="Viewport.html#zoomPercent">zoomPercent</a></li>
            
            </ul>
            <ul class="events itemMembers">
            
            <span class="subtitle">Events</span>
            
                <li class="parent" data-name="Viewport#event:bounce-x-end"><a href="Viewport.html#event:bounce-x-end">bounce-x-end</a></li>
            
                <li class="parent" data-name="Viewport#event:bounce-x-start"><a href="Viewport.html#event:bounce-x-start">bounce-x-start</a></li>
            
                <li class="parent" data-name="Viewport#event:bounce-y-end"><a href="Viewport.html#event:bounce-y-end">bounce-y-end</a></li>
            
                <li class="parent" data-name="Viewport#event:bounce-y-start"><a href="Viewport.html#event:bounce-y-start">bounce-y-start</a></li>
            
                <li class="parent" data-name="Viewport#event:clicked"><a href="Viewport.html#event:clicked">clicked</a></li>
            
                <li class="parent" data-name="Viewport#event:drag-end"><a href="Viewport.html#event:drag-end">drag-end</a></li>
            
                <li class="parent" data-name="Viewport#event:drag-start"><a href="Viewport.html#event:drag-start">drag-start</a></li>
            
                <li class="parent" data-name="Viewport#event:frame-end"><a href="Viewport.html#event:frame-end">frame-end</a></li>
            
                <li class="parent" data-name="Viewport#event:mouse-edge-end"><a href="Viewport.html#event:mouse-edge-end">mouse-edge-end</a></li>
            
                <li class="parent" data-name="Viewport#event:mouse-edge-start"><a href="Viewport.html#event:mouse-edge-start">mouse-edge-start</a></li>
            
                <li class="parent" data-name="Viewport#event:moved"><a href="Viewport.html#event:moved">moved</a></li>
            
                <li class="parent" data-name="Viewport#event:moved-end"><a href="Viewport.html#event:moved-end">moved-end</a></li>
            
                <li class="parent" data-name="Viewport#event:pinch-end"><a href="Viewport.html#event:pinch-end">pinch-end</a></li>
            
                <li class="parent" data-name="Viewport#event:pinch-start"><a href="Viewport.html#event:pinch-start">pinch-start</a></li>
            
                <li class="parent" data-name="Viewport#event:snap-end"><a href="Viewport.html#event:snap-end">snap-end</a></li>
            
                <li class="parent" data-name="Viewport#event:snap-start"><a href="Viewport.html#event:snap-start">snap-start</a></li>
            
                <li class="parent" data-name="Viewport#event:snap-zoom-end"><a href="Viewport.html#event:snap-zoom-end">snap-zoom-end</a></li>
            
                <li class="parent" data-name="Viewport#event:snap-zoom-start"><a href="Viewport.html#event:snap-zoom-start">snap-zoom-start</a></li>
            
                <li class="parent" data-name="Viewport#event:wheel"><a href="Viewport.html#event:wheel">wheel</a></li>
            
                <li class="parent" data-name="Viewport#event:wheel-scroll"><a href="Viewport.html#event:wheel-scroll">wheel-scroll</a></li>
            
                <li class="parent" data-name="Viewport#event:zoomed"><a href="Viewport.html#event:zoomed">zoomed</a></li>
            
                <li class="parent" data-name="Viewport#event:zoomed-end"><a href="Viewport.html#event:zoomed-end">zoomed-end</a></li>
            
            </ul>
        </li>
    
    </ul>
</div>
    <div class="main">
        
        <h1 class="page-title" data-filename="Viewport">Source: src/plugins/drag.js</h1>
        
        


    
    <section>
        <header>
            <div class="header content-size">
                <h2>src/plugins/drag.js</h2>
            </div>
        </header>
        <article>
            <pre id="source-code" class="prettyprint source "><code>import * as PIXI from 'pixi.js'

import { Plugin } from './plugin'

/**
 * @typedef {object} LastDrag
 * @property {number} x
 * @property {number} y
 * @property {PIXI.Point} parent
 */

/**
 * @typedef DragOptions
 * @property {string} [direction=all] direction to drag
 * @property {boolean} [wheel=true] use wheel to scroll in y direction(unless wheel plugin is active)
 * @property {number} [wheelScroll=1] number of pixels to scroll with each wheel spin
 * @property {boolean} [reverse] reverse the direction of the wheel scroll
 * @property {(boolean|string)} [clampWheel=false] clamp wheel(to avoid weird bounce with mouse wheel)
 * @property {string} [underflow=center] where to place world if too small for screen
 * @property {number} [factor=1] factor to multiply drag to increase the speed of movement
 * @property {string} [mouseButtons=all] changes which mouse buttons trigger drag, use: 'all', 'left', right' 'middle', or some combination, like, 'middle-right'; you may want to set viewport.options.disableOnContextMenu if you want to use right-click dragging
 * @property {string[]} [keyToPress=null] array containing {@link key|https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/code} codes of keys that can be pressed for the drag to be triggered, e.g.: ['ShiftLeft', 'ShiftRight'}.
 * @property {boolean} [ignoreKeyToPressOnTouch=false] ignore keyToPress for touch events
 */

const dragOptions = {
    direction: 'all',
    wheel: true,
    wheelScroll: 1,
    reverse: false,
    clampWheel: false,
    underflow: 'center',
    factor: 1,
    mouseButtons: 'all',
    keyToPress: null,
    ignoreKeyToPressOnTouch: false
}

/**
 * @private
 */
export class Drag extends Plugin
{
    /**
     * @param {Viewport} parent
     * @param {DragOptions} options
     */
    constructor(parent, options={})
    {
        super(parent)
        this.options = Object.assign({}, dragOptions, options)
        this.moved = false
        this.reverse = this.options.reverse ? 1 : -1
        this.xDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'x'
        this.yDirection = !this.options.direction || this.options.direction === 'all' || this.options.direction === 'y'
        this.keyIsPressed = false

        this.parseUnderflow()
        this.mouseButtons(this.options.mouseButtons)
        if (this.options.keyToPress) {
            this.handleKeyPresses(this.options.keyToPress)
        }
    }

    /**
     * Handles keypress events and set the keyIsPressed boolean accordingly
     * @param {array} codes - key codes that can be used to trigger drag event
     */
    handleKeyPresses(codes)
    {
        parent.addEventListener("keydown", e => {
            if (codes.includes(e.code))
                this.keyIsPressed = true
        })

        parent.addEventListener("keyup", e => {
            if (codes.includes(e.code))
                this.keyIsPressed = false
        })
    }

    /**
     * initialize mousebuttons array
     * @param {string} buttons
     */
    mouseButtons(buttons)
    {
        if (!buttons || buttons === 'all')
        {
            this.mouse = [true, true, true]
        }
        else
        {
            this.mouse = [
                buttons.indexOf('left') === -1 ? false : true,
                buttons.indexOf('middle') === -1 ? false : true,
                buttons.indexOf('right') === -1 ? false : true
            ]
        }
    }

    parseUnderflow()
    {
        const clamp = this.options.underflow.toLowerCase()
        if (clamp === 'center')
        {
            this.underflowX = 0
            this.underflowY = 0
        }
        else
        {
            this.underflowX = (clamp.indexOf('left') !== -1) ? -1 : (clamp.indexOf('right') !== -1) ? 1 : 0
            this.underflowY = (clamp.indexOf('top') !== -1) ? -1 : (clamp.indexOf('bottom') !== -1) ? 1 : 0
        }
    }

    /**
     * @param {PIXI.interaction.InteractionEvent} event
     * @returns {boolean}
     */
    checkButtons(event)
    {
        const isMouse = event.data.pointerType === 'mouse'
        const count = this.parent.input.count()
        if ((count === 1) || (count > 1 &amp;&amp; !this.parent.plugins.get('pinch')))
        {
            if (!isMouse || this.mouse[event.data.button])
            {
                return true
            }
        }
        return false
    }

    /**
     * @param {PIXI.interaction.InteractionEvent} event
     * @returns {boolean}
     */
    checkKeyPress(event)
    {
        if (!this.options.keyToPress || this.keyIsPressed || (this.options.ignoreKeyToPressOnTouch &amp;&amp; event.data.pointerType === 'touch'))
            return true

        return false
    }

    /**
     * @param {PIXI.interaction.InteractionEvent} event
     */
    down(event)
    {
        if (this.paused)
        {
            return
        }
        if (this.checkButtons(event) &amp;&amp; this.checkKeyPress(event))
        {
            this.last = { x: event.data.global.x, y: event.data.global.y }
            this.current = event.data.pointerId
            return true
        }
        else
        {
            this.last = null
        }
    }

    get active()
    {
        return this.moved
    }

    /**
     * @param {PIXI.interaction.InteractionEvent} event
     */
    move(event)
    {
        if (this.paused)
        {
            return
        }
        if (this.last &amp;&amp; this.current === event.data.pointerId)
        {
            const x = event.data.global.x
            const y = event.data.global.y
            const count = this.parent.input.count()
            if (count === 1 || (count > 1 &amp;&amp; !this.parent.plugins.get('pinch')))
            {
                const distX = x - this.last.x
                const distY = y - this.last.y
                if (this.moved || ((this.xDirection &amp;&amp; this.parent.input.checkThreshold(distX)) || (this.yDirection &amp;&amp; this.parent.input.checkThreshold(distY))))
                {
                    const newPoint = { x, y }
                    if (this.xDirection)
                    {
                        this.parent.x += (newPoint.x - this.last.x) * this.options.factor
                    }
                    if (this.yDirection)
                    {
                        this.parent.y += (newPoint.y - this.last.y) * this.options.factor
                    }
                    this.last = newPoint
                    if (!this.moved)
                    {
                        this.parent.emit('drag-start', { screen: new PIXI.Point(this.last.x, this.last.y), world: this.parent.toWorld(new PIXI.Point(this.last.x, this.last.y)), viewport: this.parent})
                    }
                    this.moved = true
                    this.parent.emit('moved', { viewport: this.parent, type: 'drag' })
                    return true
                }
            }
            else
            {
                this.moved = false
            }
        }
    }

    /**
     * @param {PIXI.interaction.InteractionEvent} event
     * @returns {boolean}
     */
    up()
    {
        if (this.paused)
        {
            return
        }
        const touches = this.parent.input.touches
        if (touches.length === 1)
        {
            const pointer = touches[0]
            if (pointer.last)
            {
                this.last = { x: pointer.last.x, y: pointer.last.y }
                this.current = pointer.id
            }
            this.moved = false
            return true
        }
        else if (this.last)
        {
            if (this.moved)
            {
                const screen = new PIXI.Point(this.last.x, this.last.y)
                this.parent.emit('drag-end', {screen, world: this.parent.toWorld(screen), viewport: this.parent})
                this.last = null
                this.moved = false
                return true
            }
        }
    }

    /**
     * @param {WheelEvent} event
     * @returns {boolean}
     */
    wheel(event)
    {
        if (this.paused)
        {
            return
        }

        if (this.options.wheel)
        {
            const wheel = this.parent.plugins.get('wheel')
            if (!wheel)
            {
                if (this.xDirection)
                {
                    this.parent.x += event.deltaX * this.options.wheelScroll * this.reverse
                }
                if (this.yDirection)
                {
                    this.parent.y += event.deltaY * this.options.wheelScroll * this.reverse
                }
                if (this.options.clampWheel)
                {
                    this.clamp()
                }
                this.parent.emit('wheel-scroll', this.parent)
                this.parent.emit('moved', { viewport: this.parent, type: 'wheel' })
                if (!this.parent.options.passiveWheel)
                {
                    event.preventDefault()
                }
                return true
            }
        }
    }

    resume()
    {
        this.last = null
        this.paused = false
    }

    clamp()
    {
        const decelerate = this.parent.plugins.get('decelerate') || {}
        if (this.options.clampWheel !== 'y')
        {
            if (this.parent.screenWorldWidth &lt; this.parent.screenWidth)
            {
                switch (this.underflowX)
                {
                    case -1:
                        this.parent.x = 0
                        break
                    case 1:
                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth)
                        break
                    default:
                        this.parent.x = (this.parent.screenWidth - this.parent.screenWorldWidth) / 2
                }
            }
            else
            {
                if (this.parent.left &lt; 0)
                {
                    this.parent.x = 0
                    decelerate.x = 0
                }
                else if (this.parent.right > this.parent.worldWidth)
                {
                    this.parent.x = -this.parent.worldWidth * this.parent.scale.x + this.parent.screenWidth
                    decelerate.x = 0
                }
            }
        }
        if (this.options.clampWheel !== 'x')
        {
            if (this.parent.screenWorldHeight &lt; this.parent.screenHeight)
            {
                switch (this.underflowY)
                {
                    case -1:
                        this.parent.y = 0
                        break
                    case 1:
                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight)
                        break
                    default:
                        this.parent.y = (this.parent.screenHeight - this.parent.screenWorldHeight) / 2
                }
            }
            else
            {
                if (this.parent.top &lt; 0)
                {
                    this.parent.y = 0
                    decelerate.y = 0
                }
                if (this.parent.bottom > this.parent.worldHeight)
                {
                    this.parent.y = -this.parent.worldHeight * this.parent.scale.y + this.parent.screenHeight
                    decelerate.y = 0
                }
            }
        }
    }
}</code></pre>
        </article>
    </section>






        

        <footer class="content-size">
            <div class="footer">
                Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.3</a> on Tue Nov 19 2019 11:29:15 GMT+0800 (Taipei Standard Time)
            </div>
        </footer>
    </div>
</div>
<script>prettyPrint();</script>
<script src="scripts/main.js"></script>
</body>
</html>
